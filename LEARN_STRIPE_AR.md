# ๏ฟฝ ุฑุญูุฉ ุจูุงุก ูุธุงู ุฏูุน Stripe ุงูุงุญุชุฑุงูู (ุฏููู ุฎุทูุฉ ุจุฎุทูุฉ)

ูุฐุง ุงูุฏููู ูุดุฑุญ ูู ุงูุชุณูุณู ุงูููุทูู ูุงูููุฏุณู ุงูุฐู ุงุชุจุนูุงู ูุจูุงุก ูุฐู ุงูููุฒุฉ. ุชุนูู ูุฐู ุงูุฎุทูุงุช ูุฃููุง ูู ุงููุนูุงุฑ (Standard) ูู ุงูุดุฑูุงุช ุงููุจุฑู.

---

## ๐ ุงูุฎุทูุฉ 1: ุงูุชุฎุทูุท ูุงุฎุชูุงุฑ ุงููุนูุงุฑูุฉ (Architecture)

ูุจู ูุชุงุจุฉ ุงูููุฏุ ุงุฎุชุฑูุง ูุธุงู **Clean Architecture** (ุงููุจุณุท).

- **ุงููุฏู:** ุฃู ูููู ุงูููุฏ ูุงุจูุงู ููุชุทููุฑ. ุฅุฐุง ุฃุฑุฏูุง ุชุบููุฑ Stripe ุจู PayPal ูุณุชูุจูุงูุ ุณูุบูุฑ ูููุงุช ุจุณูุทุฉ ุฏูู ููุณ ูุงุฌูุฉ ุงููุณุชุฎุฏู.

---

## ๐ ุงูุฎุทูุฉ 2: ุฅุนุฏุงุฏ ุงูุฃุณุงุณูุงุช (Dependencies & Config)

1.  **ุงูููุชุจุงุช:** ุฃุถููุง `flutter_stripe` ููุชุนุงูู ูุน ุณุชุฑุงูุจุ ู `dio` ููุงุชุตุงู ุจุงูุฅูุชุฑูุชุ ู `flutter_bloc` ูุฅุฏุงุฑุฉ ุงูุญุงูุงุช.
2.  **ุงููุฑูุฒูุฉ:** ุฃูุดุฃูุง ููู `StripeKeys` ูุชุฌููุน ูู ุงูููุงุชูุญ (Publishable, Secret, Customer ID).
    - _ููุงุฐุงุ_ ููู ูุง ูุถูุน ููุชูุง ูู ุงูุจุญุซ ุนู ุงูููุงุชูุญ ุฏุงุฎู ุงูููุฏ ุงูุจุฑูุฌู ูุงุญูุงู.

---

## ๐ ุงูุฎุทูุฉ 3: ุจูุงุก ุทุจูุฉ ุงูุจูุงูุงุช (The Data Layer)

ูุฐู ุงูุทุจูุฉ ูู ุงูุชู "ุชุชุญุฏุซ" ูุน ุงูุนุงูู ุงูุฎุงุฑุฌู.

1.  **ุงูููุฏูู (Model):** ุตูููุง `PaymentIntentModel` ููููู "ูุนุงุกู" ูุณุชูุจู ุงูุจูุงูุงุช ุงููุงุฏูุฉ ูู ุณุชุฑุงูุจ (ูุซู ุงูู clientSecret).
2.  **ูุตุฏุฑ ุงูุจูุงูุงุช (DataSource):** ุฃูุดุฃูุง `StripeRemoteDataSource` ุงูุฐู ูููู ุจู 3 ููุงู ูู ุทูุจ ูุงุญุฏ:
    - ุฅูุดุงุก ุนููู (Customer).
    - ุฅูุดุงุก ููุชุงุญ ูููุตูู (Ephemeral Key).
    - ุฅูุดุงุก ุทูุจ ุงูุฏูุน (Payment Intent).
3.  **ุงููุณุชูุฏุน (Repository):** ุฃูุดุฃูุง `PaymentRepository` ููููู ุจู "ุชูุณูู" ุงูุนูููุงุช:
    - ุงุณุชุฏุนุงุก ุงูู DataSource ูุฌูุจ ุงูุจูุงูุงุช.
    - ุงุณุชุฏุนุงุก ุฏุงูุฉ `initPaymentSheet` ูุชููุฆุฉ ุงูุดุงุดุฉ ูู ุงูููุจุงูู.
    - ุงุณุชุฏุนุงุก `presentPaymentSheet` ูุนุฑุถูุง ูุนููุงู.

---

## ๐ ุงูุฎุทูุฉ 4: ุฅุฏุงุฑุฉ ุงูุญุงูุงุช (State Management)

ุงุณุชุฎุฏููุง **Cubit** ูุฃูู ุฎููู ููุนุงู.

1.  **ุงูุญุงูุงุช (States):** ุญุฏุฏูุง 5 ุญุงูุงุช ููุชุทุจูู:
    - `Initial`: ุงูุจุฏุงูุฉ.
    - `Loading`: ุฃุซูุงุก ุงูุชุธุงุฑ ุงูุฑุฏ ูู ุงูุฅูุชุฑูุช.
    - `Ready`: ุนูุฏูุง ุชููู ุดุงุดุฉ ุงูุฏูุน ุฌุงูุฒุฉ ููุธููุฑ.
    - `Success`: ุนูุฏ ูุฌุงุญ ุงูุนูููุฉ.
    - `Failure`: ุนูุฏ ุญุฏูุซ ุฃู ุฎุทุฃ.
2.  **ุงูููุทู (Logic):** ุงูู Cubit ูุณุชุฏุนู ุงูู Repository ููุนูุณ ุงููุชูุฌุฉ (ูุฌุงุญ ุฃู ูุดู) ุนูู ุงูุดุงุดุฉ.

---

## ๐ ุงูุฎุทูุฉ 5: ุชููุฆุฉ ุงูููุตุงุช (Platform Setup)

ูุฐู ุฃูู ุฎุทูุฉ ุชูููุฉ ูุถูุงู ุนุฏู ุชููู ุงูุจุฑูุงูุฌ:

1.  **Android:**
    - ูููุง ุจุชุบููุฑ `MainActivity` ูุชููู `FlutterFragmentActivity`.
    - ูููุง ุจุชุญุฏูุซ `styles.xml` ููุณุชุฎุฏู ุซูู `MaterialComponents`.
    - ุฑูุนูุง `minSdkVersion` ุฅูู 21.
2.  **Web:** ุฃุถููุง ููุฏ ุงูุญูุงูุฉ `kIsWeb` ูููุน ุงุณุชุฏุนุงุก ููุชุจุงุช ุงูููุจุงูู ูู ุงููุชุตูุญ.

---

## ๐ ุงูุฎุทูุฉ 6: ุงูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ุจุงุญุชุฑุงููุฉ (Functional Error Handling)

ุงุณุชุฎุฏููุง ููุชุจุฉ `dartz` ูููุน `Either`.

- **ุงูููุณูุฉ:** ุงูุฏุงูุฉ ูุง ุชุฑูู ุฎุทุงู (No Throws)ุ ุจู ุชุฑุฌุน ุฅูุง "ูุดู" ูู ุงููุฏ ุงููุณุฑู (Left) ุฃู "ูุฌุงุญ" ูู ุงููุฏ ุงููููู (Right). ูุฐุง ูุฌุนู ุงูููุฏ ูุณุชูุฑุงู ุฌุฏุงู.

---

## ๏ฟฝ ููู ุชุชุนูู ูู ูุฐุง ุงูููุฏุ

1.  **ุงูุชุญ ููู `StripeKeys`**: ุบูุฑ ุงูููุงุชูุญ ูุฌุฑุจ ููู ูุชุฃุซุฑ ุงูุชุทุจูู.
2.  **ุชุชุจุน ุงููุณุงุฑ**: ุงุจุฏุฃ ูู ุฒุฑ "Pay Now" ูู `CheckoutView` ูุงูุธุฑ ููู ูุณุชุฏุนู ุงูู Cubitุ ุซู ููู ูุฐูุจ ุงูุทูุจ ููู Repo ูููู ููู DataSource.
3.  **ุบูุฑ ุงููุจุงูุบ**: ุฌุฑุจ ุชุบููุฑ ุงูุฑูู ูู `CheckoutView` ูุดุงูุฏ ููู ูุชุบูุฑ ูู ูุงุฌูุฉ ุณุชุฑุงูุจ.

---

**ุชุฐูุฑ:** ุฃูุช ุงูุขู ุชูุชูู "ูุงูุจ" (Template) ุนุงูููุ ููููู ุฃุฎุฐู ููุถุนู ูู ุฃู ุชุทุจูู ุชุฌุงุฑู ูุณูุนูู ุจููุงุกุฉ ุนุงููุฉ ุฌุฏุงู. ๐
